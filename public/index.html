<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="//unpkg.com/alpinejs" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.4.0/axios.min.js" integrity="sha512-uMtXmF28A2Ab/JJO2t/vYhlaa/3ahUOgj1Zf27M5rOo8/+fcTUVH0/E0ll68njmjrLqOBjXM3V9NiPFL5ywWPQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="api.js"></script>
    <title> Total phonebill</title>
</head>
<body x-data="phoneBill">
    <h1>Total Phonebill</h1>
    <section>
        <h2>Calculate The Total PhoneBill</h2>
        <input type="text" x-model="price_plan" placeholder="plan name">
        <input type="text" x-model="actions" placeholder="phone log">
        <button @click="calculateBill">Calculate</button><br>
        <span x-show="showTotal" x-transition>
         <label for="totalPhoneBill">Total Bill = </label>
        <input x-model="totalPhoneBill" id="totalPhoneBill" value="totalPhoneBill">
        </span>
        
    </section>

    <section>
        <h2>Get All The Price Plans</h2>
        <button @click="getAllPricePlans">Get all Price Plans</button>
        <table x-show="viewPlans" x-transition>
            <head>
                <tr>
                    <td>Id</td>
                    <td>Plan Name</td>
                    <td>Sms Price</td>
                    <td>Call Price</td>
                </tr>
            </head>
            <tbody>
                    <template x-for="plans in allPricePlans">
                        <tr>
                        <td x-text="plans.id"></td>
                        <td x-text="plans.plan_name"></td>
                        <td x-text="plans.sms_price"></td>
                        <td x-text="plans.call_price"></td>
                        </tr>   
                    </template>
            </tbody>
        </table>
    </section>

    <section>
        <h2>Create New Price Plan</h2>
        <input type="text" placeholder="plan name" x-model="newPlanName">
        <input type="number" placeholder="call cost" x-model="newCallCost">
        <input type="number" placeholder="sms cost" x-model="newSmsCost">
        <button @click="addNewPlan">Add To Price Plan</button>
        <div x-text="newMessage"></div>
    </section>

    <section>
        <h2>Update Price Plan</h2>
        <input type="text" placeholder="plan name" x-model="updatename">
        <input type="number" placeholder="call cost" x-model="updateCallCost">
        <input type="number" placeholder="sms cost" x-model="updateSmsCost">
        <button @click="updatePlan">Update Price Plan</button>
        <div x-text="updateMessage"></div>
    </section>

    <section>
        <h2>Delete Price Plan</h2>
        <input type="number" placeholder="plan Id" x-model="planId">
        <button @click="deletePlan"> Delete Price Plan</button>
        <div x-text="deleteMessage"></div>
    </section>

    <section>
        <h2>Show Submitted Bill Prices</h2>
        <Button @click="getBillHistory">Get Bill History</Button>
       
       <table x-show="showHistory" x-transion>
        <thead>
            <tr>
                <td>Price Plan</td>
                <td>Bill Total</td>
                <td>Bill List</td>
            </tr>
        </thead>
        
        <tbody>
            
            <td>
            <template x-for="plans in thePlans">
                <tr x-text="plans"></tr>
            </template>
            </td>
    
            <td>
                <template x-for="totals in billHistory">
                <tr x-text="totals"></tr>
            </template>
            </td>

            <td>
                <template x-for="bills in listOfBills">
                <tr x-text="bills"></tr>
            </template>
            </td>
        </tbody>
       
       </table> 
    </section>
</body>
</html>